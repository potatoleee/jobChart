import{_ as U,r as o,o as T,a as l,c as r,b as a,n as j,w as k,v as F,F as f,d as B,e as O,f as L,C as M,t as V}from"./index-20c7ac59.js";const N={setup(){const _=o([]),n=o("1 年以下"),c=o([]),t=o([]),v=o([]),h=o(!0),e=o(null),y=o(null),m=o(null),w=s=>{s==="frontendChartCanvas"?(console.log("目前職位:",s,e),h.value=!0,e.value=y.value,console.log(e.value),u(e.value),g("1 年以下","frontend")):s==="designerChartCanvas"&&(console.log("目前職位:",s,e),h.value=!1,e.value=m.value,u(e.value),g("1 年以下","designer"))};T(()=>{console.log(e.value),w("frontendChartCanvas")});const d=o({}),g=(s,C)=>{let p="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/frontend_data.json";C==="designer"&&(p="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/ui_data.json"),L.get(p).then(D=>{d.value=D.data.reduce((i,P)=>{const{job_tenure:b,salary:x}=P.company;return i[b]=Object.assign(i[b]||{},{[x]:(i[b]&&i[b][x]||0)+1}),i},{}),console.log(d.value),c.value=Object.keys(d.value),c.value.pop(),t.value=Object.keys(d.value[s]),v.value=Object.values(d.value[s]),u(e.value)})},u=s=>{if(!s){console.log("PieCanvasRef===null");return}s.chart&&s.chart.destroy();const C=s.getContext("2d");s.chart=new M(C,{type:"pie",data:{labels:t.value,datasets:[{data:v.value}]}})};return T(()=>{g("1 年以下","frontend"),u(e.value)}),{frontendChartCanvas:y,designerChartCanvas:m,salaryByTenure:d,salaries:_,selectedTenure:n,tenures:c,chartLabels:t,chartData:v,showFrontend:h,canvasRef:e,switchCanvas:w,selectTenurePie:g,renderPieChart:u}}},S=a("div",null,"這是圓餅圖",-1),z={class:"col-12 d-flex align-items-center justify-content-center"},E={key:0},I=["value"],q={ref:"frontendChartCanvas"},A={key:1},G=["value"],H={ref:"designerChartCanvas"};function J(_,n,c,t,v,h){return l(),r(f,null,[S,a("div",z,[a("button",{type:"button",class:j(["btn btn-light fs-base py-2 px-12 mb-0 shadow",t.showFrontend?"bg-primary text-light":"bg-light"]),onClick:n[0]||(n[0]=e=>t.switchCanvas("frontendChartCanvas"))}," 前端工程師 ",2),a("button",{type:"button",class:j(["btn btn-light fs-base py-2 px-12 mb-0 shadow",t.showFrontend?"bg-light":"bg-primary text-light"]),onClick:n[1]||(n[1]=e=>t.switchCanvas("designerChartCanvas"))}," UI設計師 ",2)]),t.showFrontend?(l(),r("div",E,[k(a("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>t.selectedTenure=e),onChange:n[3]||(n[3]=e=>t.selectTenurePie(t.selectedTenure,"frontend"))},[(l(!0),r(f,null,B(t.tenures,e=>(l(),r("option",{value:e,key:e+"年"},V(e),9,I))),128))],544),[[F,t.selectedTenure]]),a("canvas",q,null,512)])):O("",!0),t.showFrontend?O("",!0):(l(),r("div",A,[k(a("select",{"onUpdate:modelValue":n[4]||(n[4]=e=>t.selectedTenure=e),onChange:n[5]||(n[5]=e=>t.selectTenurePie(t.selectedTenure,"designer"))},[(l(!0),r(f,null,B(t.tenures,e=>(l(),r("option",{value:e,key:e+"年"},V(e),9,G))),128))],544),[[F,t.selectedTenure]]),a("canvas",H,null,512)]))],64)}const Q=U(N,[["render",J]]);export{Q as default};
