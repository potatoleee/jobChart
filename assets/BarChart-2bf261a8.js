import{_ as L,r as a,o as k,a as o,c as r,b as l,n as T,w as F,v as B,F as y,d as O,e as C,f as M,C as N,t as V}from"./index-e7654802.js";const S={setup(){const _=a([]),n=a("1 年以下"),u=a([]),t=a([]),c=a([]),v=a(!0),e=a(null),m=a(null),x=a(null),p=s=>{s==="frontendChartCanvas"?(v.value=!0,e.value=m.value,h("1 年以下","frontend")):s==="designerChartCanvas"&&(v.value=!1,e.value=x.value,h("1 年以下","designer")),b(e.value)};k(()=>{p("frontendChartCanvas")});const d=a({}),h=(s,f)=>{let w="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/frontend_data.json";f==="designer"&&(w="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/ui_data.json"),M.get(w).then(D=>{d.value=D.data.reduce((i,U)=>{const{job_tenure:g,salary:j}=U.company;return i[g]=Object.assign(i[g]||{},{[j]:(i[g]&&i[g][j]||0)+1}),i},{}),u.value=Object.keys(d.value),u.value.pop(),t.value=Object.keys(d.value[s]),c.value=Object.values(d.value[s]),b(e.value)})},b=s=>{if(!s)return;s.chart&&s.chart.destroy();const f=s.getContext("2d");s.chart=new N(f,{type:"bar",data:{labels:t.value,datasets:[{label:"平均年薪",data:c.value,backgroundColor:["rgba(135, 91, 87, 1)"]}]},options:{indexAxis:"y"}})};return k(()=>{h("1 年以下","frontend"),b(e.value)}),{frontendChartCanvas:m,designerChartCanvas:x,salaryByTenure:d,salaries:_,selectedTenure:n,tenures:u,chartLabels:t,chartData:c,showFrontend:v,canvasRef:e,switchCanvas:p,selectTenurePie:h,renderPieChart:b}}},z={class:"col-12 d-flex align-items-center justify-content-center"},A={key:0},E={class:"d-flex justify-content-end mb-6"},I=["value"],q={ref:"frontendChartCanvas"},G={key:1},H={class:"d-flex justify-content-end mb-6"},J=["value"],K={key:0,ref:"designerChartCanvas"};function P(_,n,u,t,c,v){return o(),r(y,null,[l("div",z,[l("button",{type:"button",class:T(["btn btn-light fs-base py-2 px-12 mb-0 shadow",t.showFrontend?"bg-primary text-light":"bg-light"]),onClick:n[0]||(n[0]=e=>t.switchCanvas("frontendChartCanvas"))}," 前端工程師 ",2),l("button",{type:"button",class:T(["btn btn-light fs-base py-2 px-12 mb-0 shadow",t.showFrontend?"bg-light":"bg-primary text-light"]),onClick:n[1]||(n[1]=e=>t.switchCanvas("designerChartCanvas"))}," UI設計師 ",2)]),t.showFrontend?(o(),r("div",A,[l("div",E,[F(l("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>t.selectedTenure=e),onChange:n[3]||(n[3]=e=>t.selectTenurePie(t.selectedTenure,"frontend")),class:"bg-primary text-light py-2 px-10 rounded"},[(o(!0),r(y,null,O(t.tenures,e=>(o(),r("option",{value:e,key:e+"年"},V(e),9,I))),128))],544),[[B,t.selectedTenure]])]),l("canvas",q,null,512)])):C("",!0),t.showFrontend?C("",!0):(o(),r("div",G,[l("div",H,[F(l("select",{"onUpdate:modelValue":n[4]||(n[4]=e=>t.selectedTenure=e),onChange:n[5]||(n[5]=e=>t.selectTenurePie(t.selectedTenure,"designer")),class:"bg-primary text-light py-2 px-10 rounded"},[(o(!0),r(y,null,O(t.tenures,e=>(o(),r("option",{value:e,key:e+"年"},V(e),9,J))),128))],544),[[B,t.selectedTenure]])]),t.showFrontend?C("",!0):(o(),r("canvas",K,null,512))]))],64)}const W=L(S,[["render",P]]);export{W as default};
