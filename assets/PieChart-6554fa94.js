import{_ as P,r as o,o as T,a as l,c as r,b as a,w as j,v as k,F as C,d as F,e as B,f as U,C as L,t as O}from"./index-9ba22174.js";const M={setup(){const _=o([]),n=o("1 年以下"),c=o([]),t=o([]),v=o([]),h=o(!0),e=o(null),y=o(null),m=o(null),p=s=>{s==="frontendChartCanvas"?(console.log("目前職位:",s,e),h.value=!0,e.value||(e.value=y.value,d(e.value)),g("1 年以下","frontend")):s==="designerChartCanvas"&&(console.log("目前職位:",s,e),h.value=!1,e.value=m.value,d(e.value),g("1 年以下","designer"))};T(()=>{console.log(e.value),p("frontendChartCanvas")});const u=o({}),g=(s,b)=>{let w="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/frontend_data.json";b==="designer"&&(w="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/ui_data.json"),U.get(w).then(V=>{u.value=V.data.reduce((i,D)=>{const{job_tenure:f,salary:x}=D.company;return i[f]=Object.assign(i[f]||{},{[x]:(i[f]&&i[f][x]||0)+1}),i},{}),console.log(u.value),c.value=Object.keys(u.value),c.value.pop(),t.value=Object.keys(u.value[s]),v.value=Object.values(u.value[s]),d(e.value)})},d=s=>{if(!s){console.log("PieCanvasRef===null");return}s.chart&&s.chart.destroy();const b=s.getContext("2d");s.chart=new L(b,{type:"pie",data:{labels:t.value,datasets:[{data:v.value}]}})};return T(()=>{g("1 年以下","frontend"),d(e.value)}),{frontendChartCanvas:y,designerChartCanvas:m,salaryByTenure:u,salaries:_,selectedTenure:n,tenures:c,chartLabels:t,chartData:v,showFrontend:h,canvasRef:e,switchCanvas:p,selectTenurePie:g,renderPieChart:d}}},N=a("div",null,"這是圓餅圖",-1),S={class:"col-12 d-flex align-items-center justify-content-center"},E={key:0},I=["value"],q={ref:"frontendChartCanvas"},z={key:1},A=["value"],G={ref:"designerChartCanvas"};function H(_,n,c,t,v,h){return l(),r(C,null,[N,a("div",S,[a("button",{type:"button",class:"btn btn-light fs-base py-2 px-12 mb-0 bg-light shadow",onClick:n[0]||(n[0]=e=>t.switchCanvas("frontendChartCanvas"))}," 前端工程師 "),a("button",{type:"button",class:"btn btn-light fs-base py-2 px-12 mb-0 bg-light shadow",onClick:n[1]||(n[1]=e=>t.switchCanvas("designerChartCanvas"))}," UI設計師 ")]),t.showFrontend?(l(),r("div",E,[j(a("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>t.selectedTenure=e),onChange:n[3]||(n[3]=e=>t.selectTenurePie(t.selectedTenure,"frontend"))},[(l(!0),r(C,null,F(t.tenures,e=>(l(),r("option",{value:e,key:e+"年"},O(e),9,I))),128))],544),[[k,t.selectedTenure]]),a("canvas",q,null,512)])):B("",!0),t.showFrontend?B("",!0):(l(),r("div",z,[j(a("select",{"onUpdate:modelValue":n[4]||(n[4]=e=>t.selectedTenure=e),onChange:n[5]||(n[5]=e=>t.selectTenurePie(t.selectedTenure,"designer"))},[(l(!0),r(C,null,F(t.tenures,e=>(l(),r("option",{value:e,key:e+"年"},O(e),9,A))),128))],544),[[k,t.selectedTenure]]),a("canvas",G,null,512)]))],64)}const K=P(M,[["render",H]]);export{K as default};
