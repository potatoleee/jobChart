import{_ as L,r as o,o as k,a,c as r,b as l,n as T,w as F,v as B,F as y,d as O,e as C,f as M,C as N,t as V}from"./index-598f5288.js";const S={setup(){const _=o([]),n=o("1 年以下"),u=o([]),t=o([]),c=o([]),v=o(!0),e=o(null),m=o(null),x=o(null),p=s=>{s==="frontendChartCanvas"?(console.log("目前職位:",s,e),v.value=!0,e.value=m.value,console.log(e.value),h("1 年以下","frontend")):s==="designerChartCanvas"&&(console.log("目前職位:",s,e),v.value=!1,e.value=x.value,h("1 年以下","designer")),g(e.value)};k(()=>{console.log(e.value),p("frontendChartCanvas")});const d=o({}),h=(s,f)=>{let w="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/frontend_data.json";f==="designer"&&(w="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/ui_data.json"),M.get(w).then(D=>{d.value=D.data.reduce((i,U)=>{const{job_tenure:b,salary:j}=U.company;return i[b]=Object.assign(i[b]||{},{[j]:(i[b]&&i[b][j]||0)+1}),i},{}),console.log(d.value),u.value=Object.keys(d.value),u.value.pop(),t.value=Object.keys(d.value[s]),c.value=Object.values(d.value[s]),g(e.value)})},g=s=>{if(!s){console.log("PieCanvasRef===null");return}s.chart&&s.chart.destroy();const f=s.getContext("2d");s.chart=new N(f,{type:"bar",data:{labels:t.value,datasets:[{label:"平均年薪",data:c.value,backgroundColor:["rgba(135, 91, 87, 1)"]}]},options:{indexAxis:"y"}})};return k(()=>{h("1 年以下","frontend"),g(e.value)}),{frontendChartCanvas:m,designerChartCanvas:x,salaryByTenure:d,salaries:_,selectedTenure:n,tenures:u,chartLabels:t,chartData:c,showFrontend:v,canvasRef:e,switchCanvas:p,selectTenurePie:h,renderPieChart:g}}},z={class:"col-12 d-flex align-items-center justify-content-center"},A={key:0},E={class:"d-flex justify-content-end mb-6"},I=["value"],P={ref:"frontendChartCanvas"},q={key:1},G={class:"d-flex justify-content-end mb-6"},H=["value"],J={key:0,ref:"designerChartCanvas"};function K(_,n,u,t,c,v){return a(),r(y,null,[l("div",z,[l("button",{type:"button",class:T(["btn btn-light fs-base py-2 px-12 mb-0 shadow",t.showFrontend?"bg-primary text-light":"bg-light"]),onClick:n[0]||(n[0]=e=>t.switchCanvas("frontendChartCanvas"))}," 前端工程師 ",2),l("button",{type:"button",class:T(["btn btn-light fs-base py-2 px-12 mb-0 shadow",t.showFrontend?"bg-light":"bg-primary text-light"]),onClick:n[1]||(n[1]=e=>t.switchCanvas("designerChartCanvas"))}," UI設計師 ",2)]),t.showFrontend?(a(),r("div",A,[l("div",E,[F(l("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>t.selectedTenure=e),onChange:n[3]||(n[3]=e=>t.selectTenurePie(t.selectedTenure,"frontend")),class:"bg-primary text-light py-2 px-10 rounded"},[(a(!0),r(y,null,O(t.tenures,e=>(a(),r("option",{value:e,key:e+"年"},V(e),9,I))),128))],544),[[B,t.selectedTenure]])]),l("canvas",P,null,512)])):C("",!0),t.showFrontend?C("",!0):(a(),r("div",q,[l("div",G,[F(l("select",{"onUpdate:modelValue":n[4]||(n[4]=e=>t.selectedTenure=e),onChange:n[5]||(n[5]=e=>t.selectTenurePie(t.selectedTenure,"designer")),class:"bg-primary text-light py-2 px-10 rounded"},[(a(!0),r(y,null,O(t.tenures,e=>(a(),r("option",{value:e,key:e+"年"},V(e),9,H))),128))],544),[[B,t.selectedTenure]])]),t.showFrontend?C("",!0):(a(),r("canvas",J,null,512))]))],64)}const W=L(S,[["render",K]]);export{W as default};
