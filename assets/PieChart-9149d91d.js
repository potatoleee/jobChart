import{_ as U,r as o,o as j,a as l,c as r,b as a,n as T,w as k,v as F,F as y,d as B,e as O,f as L,C as M,t as V}from"./index-598f5288.js";const N={setup(){const C=o([]),n=o("1 年以下"),u=o([]),t=o([]),c=o([]),v=o(!0),e=o(null),m=o(null),_=o(null),p=s=>{s==="frontendChartCanvas"?(console.log("目前職位:",s,e),v.value=!0,e.value=m.value,console.log(e.value),h("1 年以下","frontend")):s==="designerChartCanvas"&&(console.log("目前職位:",s,e),v.value=!1,e.value=_.value,h("1 年以下","designer")),g(e.value)};j(()=>{console.log(e.value),p("frontendChartCanvas")});const d=o({}),h=(s,f)=>{let x="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/frontend_data.json";f==="designer"&&(x="https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/ui_data.json"),L.get(x).then(D=>{d.value=D.data.reduce((i,P)=>{const{job_tenure:b,salary:w}=P.company;return i[b]=Object.assign(i[b]||{},{[w]:(i[b]&&i[b][w]||0)+1}),i},{}),console.log(d.value),u.value=Object.keys(d.value),u.value.pop(),t.value=Object.keys(d.value[s]),c.value=Object.values(d.value[s]),g(e.value)})},g=s=>{if(!s){console.log("PieCanvasRef===null");return}s.chart&&s.chart.destroy();const f=s.getContext("2d");s.chart=new M(f,{type:"pie",data:{labels:t.value,datasets:[{data:c.value}]}})};return j(()=>{h("1 年以下","frontend"),g(e.value)}),{frontendChartCanvas:m,designerChartCanvas:_,salaryByTenure:d,salaries:C,selectedTenure:n,tenures:u,chartLabels:t,chartData:c,showFrontend:v,canvasRef:e,switchCanvas:p,selectTenurePie:h,renderPieChart:g}}},S={class:"col-12 d-flex align-items-center justify-content-center mb-6"},z={key:0},E={class:"d-flex justify-content-end mb-6"},I=["value"],q={ref:"frontendChartCanvas"},A={key:1},G={class:"d-flex justify-content-end mb-6"},H=["value"],J={ref:"designerChartCanvas"};function K(C,n,u,t,c,v){return l(),r(y,null,[a("div",S,[a("button",{type:"button",class:T(["btn btn-light fs-base py-2 px-12 mb-0 shadow",t.showFrontend?"bg-primary text-light":"bg-light"]),onClick:n[0]||(n[0]=e=>t.switchCanvas("frontendChartCanvas"))}," 前端工程師 ",2),a("button",{type:"button",class:T(["btn btn-light fs-base py-2 px-12 mb-0 shadow",t.showFrontend?"bg-light":"bg-primary text-light"]),onClick:n[1]||(n[1]=e=>t.switchCanvas("designerChartCanvas"))}," UI設計師 ",2)]),t.showFrontend?(l(),r("div",z,[a("div",E,[k(a("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>t.selectedTenure=e),onChange:n[3]||(n[3]=e=>t.selectTenurePie(t.selectedTenure,"frontend")),class:"bg-primary text-light py-2 px-10 rounded"},[(l(!0),r(y,null,B(t.tenures,e=>(l(),r("option",{value:e,key:e+"年"},V(e),9,I))),128))],544),[[F,t.selectedTenure]])]),a("canvas",q,null,512)])):O("",!0),t.showFrontend?O("",!0):(l(),r("div",A,[a("div",G,[k(a("select",{"onUpdate:modelValue":n[4]||(n[4]=e=>t.selectedTenure=e),onChange:n[5]||(n[5]=e=>t.selectTenurePie(t.selectedTenure,"designer")),class:"bg-primary text-light py-2 px-10 rounded"},[(l(!0),r(y,null,B(t.tenures,e=>(l(),r("option",{value:e,key:e+"年"},V(e),9,H))),128))],544),[[F,t.selectedTenure]])]),a("canvas",J,null,512)]))],64)}const W=U(N,[["render",K]]);export{W as default};
